parameters:
    oro_user.manager.class:           Oro\Bundle\UserBundle\Entity\UserManager
    oro_user.entity.class:            Oro\Bundle\UserBundle\Entity\User
    oro_user.entity.value.class:      Oro\Bundle\UserBundle\Entity\UserValue
    oro_user.security.provider.class: Oro\Bundle\UserBundle\Security\UserProvider
    oro_user.security.login.class:    Oro\Bundle\UserBundle\EventListener\LoginSubscriber
    oro_user.type.profile.class:      Oro\Bundle\UserBundle\Form\Type\ProfileType
    oro_user.type.reset.class:        Oro\Bundle\UserBundle\Form\Type\ResetType
    oro_user.handler.profile.class:   Oro\Bundle\UserBundle\Form\Handler\ProfileHandler
    oro_user.handler.reset.class:     Oro\Bundle\UserBundle\Form\Handler\ResetHandler

services:
    oro_user.manager:
        class:                        %oro_user.manager.class%
        arguments:                    ["@service_container", %oro_user.entity.class%, null, "@security.encoder_factory"]

    oro_user.security.provider:
        class:                        %oro_user.security.provider.class%
        public:                       false
        arguments:                    ["@oro_user.manager"]

    oro_user.security.login:
        class:                        %oro_user.security.login.class%
        arguments:                    ["@oro_user.manager"]
        tags:
            - { name: kernel.event_listener, event: security.interactive_login, method: onLogin }

    oro_user.form.profile:
        class:                        Symfony\Component\Form\Form
        factory_method:               createNamed
        factory_service:              form.factory
        arguments:                    ["oro_user_profile_form", "oro_user_profile", null, { validation_groups: [ResetPassword, Default] }]

    oro_user.form.reset:
        class:                        Symfony\Component\Form\Form
        factory_method:               createNamed
        factory_service:              form.factory
        arguments:                    ["oro_user_reset_form", "oro_user_reset", null, { validation_groups: [ResetPassword, Default] }]

    oro_user.form.type.profile:
        class:                        %oro_user.type.profile.class%
        arguments:                    [%oro_user.entity.class%, %oro_user.entity.value.class%]
        tags:
            - { name: form.type, alias: oro_user_profile }

    oro_user.form.type.reset:
        class:                        %oro_user.type.reset.class%
        tags:
            - { name: form.type, alias: oro_user_reset }

    oro_user.form.handler.profile:
        class:                        %oro_user.handler.profile.class%
        scope:                        request
        arguments:                    ["@oro_user.form.profile", "@request", "@oro_user.manager"]

    oro_user.form.handler.reset:
        class:                        %oro_user.handler.reset.class%
        scope:                        request
        arguments:                    ["@oro_user.form.reset", "@request", "@oro_user.manager"]
