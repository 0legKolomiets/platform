{% extends 'OroUIBundle:Form:fields.html.twig' %}

{% block oro_region_widget %}
    {# // check if block was not included yet #}
    {% set _block = block('oro_region_updater_js') %}
    {% if (_block is empty) %}
        {% include 'OroAddressBundle:Include:javascript.html.twig' %}
        {{ block('oro_region_updater_js')|raw }}
    {% endif %}

    {% set country_field = country_field|default('#oro_address_form_country') %}

    {{ form_widget(form) }}

    <script type="text/javascript">
        $(function() {
            var regions = new Oro.RegionUpdater.Collection();

            var regionView = new Oro.RegionUpdater.View ({
                el: $('{{ country_field }}'),
                target: $('#{{ id }}'),
                collection: regions
            });

            regionView.sync();
        });
    </script>
{% endblock oro_region_widget %}

{% block oro_address_widget %}
    {{ form_row(form.street) }}
    {{ form_row(form.street2) }}
    {{ form_row(form.country) }}
    {{ form_row(form.state) }}
    {{ form_row(form.city) }}
    {{ form_row(form.postalCode) }}
    {{ form_row(form.mark) }}
{%  endblock oro_address_widget %}
